<div>
  <h1>勤怠ログ</h1>
  
  <%= form_tag worked_log_path, :method => 'get' do %> <%#　projects_pathはモデル名で読みかえること %>
    <p>
      <%= month_field_tag :search, params[:search] %>
      <%= submit_tag "Search" %>
    </p>
  <% end %>
  
  <table class="table table-bordered table-condensed table-striped" id ="table-attendances">
    <thead>
      <tr>
        <th>日付</th>
        <th>変更前出社時間</th>
        <th>変更前退社時間</th>
        <th>変更後出社</th>
        <th>変更後退社</th>
        <th>指示者</th>
        <th>承認日</th>
      </tr>
    </thead>
    <tbody>
      <% attendance_change = @attendances_search.where(user_id: current_user.id).where.not(approval_date: nil).order(:worked_on) %>
        <% attendance_change.each do |day| %> 
          <tr>
            <td><%= day.worked_on %></td>
            <td><%= l(day.started_at, format: :time) %></td>
            <td><%= l(day.finished_at, format: :time) %></td>
            <td><%= l(day.approval_started, format: :time) %></td>
            <td><%= l(day.approval_finished, format: :time) %></td>
            <td><%= day.worked_request_sign %></td>
            <td><%= l(day.approval_started, format: :time) %></td>
          </tr>
        <% end %> 
    </tbody>
  </table>  
</div>
